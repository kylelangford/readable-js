"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t():e.Readable=t()}("undefined"!=typeof self?self:void 0,function(){function s(e){var a=this;this.elementBindings=[],this.value=e.object[e.property],this.valueGetter=function(){return a.value},this.valueSetter=function(e){a.value=e;for(var t=0;t<a.elementBindings.length;t++){var n=a.elementBindings[t];n.element[n.attribute]=e}},this.addBinding=function(t,n,e){var i={element:t,attribute:n};return e&&(t.addEventListener(e,function(e){a.valueSetter(t[n])}),i.event=e),this.elementBindings.push(i),t[n]=a.value,a},Object.defineProperty(e.object,e.property,{get:this.valueGetter,set:this.valueSetter}),e.object[e.property]=this.value}var e={bind:!!function(){}.bind,classList:"classList"in document.documentElement},n=function(e,t){var n,i={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i};function i(e){return e=(e=e.replace(/-/g," ")).replace(/_/g," ")}function a(e){return(e=i(e)).match(/\b(\w)/g).join("")}function r(e,t){t=n(t,r.options),this.initialised=!1,this.targetClass=e,this.namespace=t.namespace,this.elem=this.elem,this.title=t.title,this.defaultStyles=t.defaultStyles,this.inputs=t.inputs.map(function(e){return e.id=t.namespace+"-"+e.type+"-"+a(e.name),e.class=t.namespace+"--"+e.type+"-"+a(e.name),e.label=function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}(i(e.name))+":",e.labelClass=t.namespace+"--label-"+a(e.name),e})}return r.prototype={constructor:r,init:function(){if(r.isSupported)return this.defaultStyles&&this.addDefaultStyles(),this.createWidget(this.targetClass),setTimeout(this.attachEvent.bind(this),100),this},destroy:function(){document.removeEventListener("change")},createWidget:function(e){if(e){var t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("small");document.createElement("button");t.id=this.namespace,t.classList.add(this.namespace),i.innerHTML=this.title,t.appendChild(i),t.appendChild(n),e.appendChild(t),this.createFormElements(n)}},createFormElements:function(a){var e=r.options.inputs;e.forEach(function(e,t){var n=document.createElement("div");n.classList.add("input-group");var i='\n          <label class="'.concat(e.labelClass,'" for="').concat(e.name,'">').concat(e.label," <span>").concat(e.value,'</span></label>\n          <input id="').concat(e.id,'" name="').concat(e.name,'" class="').concat(e.class,'" type="range"  min="').concat(e.min,'" max="').concat(e.max,'" step="').concat(e.step,'" />\n        ');n.innerHTML=i,n.classList.add("range"),a.appendChild(n)}),this.bindInputs(e)},bindInputs:function(e){e.forEach(function(e,t){var n="."+e.labelClass+" span",i=document.getElementById(e.id),a=document.querySelector(n),o=document.querySelector(".make-readable p");console.log(o),new s({object:r.options.inputs[t],property:"value"}).addBinding(i,"value","change").addBinding(a,"innerHTML")})},attachEvent:function(){if(!this.initialised){this.initialised=!0;new CustomEvent("bang");document.addEventListener("change",function(e){var t=e.target.id,n=document.getElementById(t),i=r.options.elem,a=document.querySelectorAll(i),o=r.options.inputs,s=n.value;e.preventDefault(),o.forEach(function(t){e.target.matches("#"+t.id)&&a.forEach(function(e){t.update(e,s)})})},!1),document.addEventListener("click",function(e){e.target.matches("#save")&&function(e){console.log("saved"),localStorage.setItem("readableSettings",JSON.stringify(e))}(r.options)},!1)}},addDefaultStyles:function(){var e=document.createElement("style");e.innerHTML="."+this.namespace+" {position: absolute;top: 0;right: -170px;z-index: 999;padding: 8px;margin: 8px;border: 2px solid #DCDCDC;border-radius: 3px;background-color: white;}.input-group {margin-top: 8px;margin-bottom: 8px;}.input-group label {display: block;font-size: 12px;font-weight: bold;}.input-radio {display: inline-block;}.input-slider {display: block;}";var t=document.querySelector("head");t.parentNode.insertBefore(e,t)},addTics:function(){document.querySelectorAll(".range").forEach(function(e){document.createElement("div");var t=function(){var e=document.createElement("div");e.classList.add("ruler");for(var t=0;t<=20;t+=4){var n=document.createElement("div"),i=document.createElement("span");i.innerHTML=t,n.appendChild(i),e.appendChild(n)}return e}();e.appendChild(t)})}},r.options={elem:".make-readable p",title:"Change Typesetting",defaultStyles:!0,namespace:"readable",inputs:[{type:"range",css:"font-size",name:"font-size",update:function(e,t){e.style.fontSize=t+"px"},min:14,max:36,step:1,value:24},{type:"range",css:"word-spacing",name:"word-spacing",update:function(e,t){e.style.wordSpacing=t+"em"},min:0,max:3,step:.1,value:0},{type:"range",css:"letter-spacing",name:"letter-spacing",update:function(e,t){e.style.letterSpacing=t/10+"em"},min:0,max:3,step:.1,value:0},{type:"range",css:"line-height",name:"line-height",update:function(e,t){e.style.lineHeight=t},min:1,max:3,step:.1,value:1.4}]},r.isSupported=void 0!==e&&e.bind&&e.classList,r});